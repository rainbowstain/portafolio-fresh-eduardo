import{b as h}from"./chunk-BVV3Q4ZD.js";import"./chunk-IPT66BWZ.js";import{a as e}from"./chunk-MEABNXAK.js";import{b as g}from"./chunk-3ZSQAMNX.js";import{b as m,c as x}from"./chunk-7NHJIUSQ.js";import"./chunk-GI7LLYGM.js";import{d as T}from"./chunk-V66ALGLP.js";var r=g?window.gsap:null,L=["Proyectos","Educaci\xF3n","Habilidades","Experiencia","Contacto","Hobbies","Tecnolog\xEDas","M\xFAsica","Videojuegos"];function q(){let l=h(""),n=h([{role:"assistant",content:"\xA1Hola! Soy SobremIA, creada por Eduardo. \xBFEn qu\xE9 puedo ayudarte hoy? \u{1F680}"}]),a=h(!1),E=h(!1),S=h(!0),b=x(null),k=x(null),M=x(null);m(()=>{if(setTimeout(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},10),g&&r&&n.value.length>1){let t=document.querySelectorAll(".message-bubble"),o=t[t.length-1];o&&r.fromTo(o,{opacity:.9,y:5},{opacity:1,y:0,duration:.3,ease:"power1.out"})}},[n.value]);let j=async t=>{if(t.preventDefault(),!l.value.trim()||a.value)return;let o=l.value.trim();n.value=[...n.value,{role:"user",content:o}],l.value="",a.value=!0,E.value=!1,S.value=!1,d.value=!1;try{n.value=[...n.value,{role:"assistant",content:""}];let s=n.value.length-1,p=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})});if(!p.ok)throw new Error(`Error: ${p.status}`);let i=await p.json();if(i.error)throw new Error(i.error);let w=i.reply;if(w.includes(`

`)){n.value=n.value.slice(0,-1);let c=w.split(`

`);for(let u=0;u<c.length;u++){let y=c[u];n.value=[...n.value,{role:"assistant",content:""}];let I=n.value.length-1;for(let v=0;v<y.length;v++){await new Promise(H=>setTimeout(H,5));let C=[...n.value];C[I].content+=y[v],n.value=C}u<c.length-1&&await new Promise(v=>setTimeout(v,500))}}else for(let c=0;c<w.length;c++){await new Promise(y=>setTimeout(y,5));let u=[...n.value];u[s].content+=w[c],n.value=u}d.value=!0}catch(s){console.error("Error:",s),E.value=!0,n.value=[...n.value.slice(0,-1),{role:"assistant",content:"\xA1Ups! No pude conectarme con mi cerebro AI. \xBFPodr\xEDas intentarlo de nuevo en unos momentos? \u{1F916}\u{1F4A5}"}]}finally{a.value=!1}},f=t=>{l.value=t;let o=new Event("submit");document.querySelector("form")?.dispatchEvent(o)},A=["\xBFCu\xE1les son tus habilidades principales?","Cu\xE9ntame sobre tu proyecto de tesis","\xBFQu\xE9 tecnolog\xEDas dominas?","\xBFCu\xE1l es tu experiencia profesional?","\xBFC\xF3mo puedo contactarte?","\xBFQu\xE9 proyectos destacados has desarrollado?"],d=h(!1);return m(()=>{if(g){let t=document.querySelectorAll("#ia-chat-suggestions span");return t.forEach(o=>{o.addEventListener("click",()=>{let s=o.textContent||"";f(s)})}),()=>{t.forEach(o=>{o.removeEventListener("click",()=>{})})}}},[]),m(()=>{if(g&&d.value){let t=document.querySelectorAll("#topic-buttons button");return t.forEach(o=>{o.addEventListener("click",()=>{let s=o.textContent||"";f(`H\xE1blame sobre ${s}`),d.value=!1})}),()=>{t.forEach(o=>{o.removeEventListener("click",()=>{})})}}},[d.value]),m(()=>{if(g&&r){M.current&&r.fromTo(M.current,{opacity:0,y:-20},{opacity:1,y:0,duration:.7,ease:"power2.out"}),k.current&&r.fromTo(k.current,{opacity:0,scale:.98},{opacity:1,scale:1,duration:.8,ease:"expo.out",delay:.2});let t=document.querySelectorAll("#ia-chat-suggestions span");r.fromTo(t,{opacity:0,y:10,stagger:.05},{opacity:1,y:0,stagger:.05,duration:.4,delay:.5,ease:"power1.out"});let o=document.querySelectorAll("#topic-buttons button");r.fromTo(o,{opacity:0,y:10,stagger:.05},{opacity:1,y:0,stagger:.05,duration:.4,delay:.3,ease:"power1.out"}),document.querySelectorAll("#ia-chat-suggestions span, #topic-buttons button").forEach(i=>{i.addEventListener("mouseenter",()=>{r.to(i,{scale:1.05,duration:.2,ease:"power1.out"})}),i.addEventListener("mouseleave",()=>{r.to(i,{scale:1,duration:.2,ease:"power1.out"})})});let p=document.querySelector(".message-bubble");p&&r.fromTo(p,{opacity:0,x:-20},{opacity:1,x:0,duration:.6,delay:.3,ease:"back.out(1.4)"})}},[]),g?e("div",{children:[e("div",{class:"flex items-center text-white font-bold mb-3",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-7 w-7 mr-2 relative z-10",children:[e("path",{d:"M12 6V2H8"}),e("path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"}),e("path",{d:"M2 12h2"}),e("path",{d:"M9 11v2"}),e("path",{d:"M15 11v2"}),e("path",{d:"M20 12h2"})]}),e("span",{class:"text-2xl tracking-tight",children:"SobremIA Chat"})]}),e("div",{ref:k,class:"rounded-xl border border-nothing-gray overflow-hidden flex flex-col bg-nothing-black h-full relative chat-wrapper",children:[e("style",{children:`
            /* Estilo para scrollbar roja - compatible con todos los navegadores */
            .chat-messages {
              overflow-y: auto;
              scrollbar-width: thin;
              scrollbar-color: #ff0000 #1a1a1a;
              -webkit-overflow-scrolling: touch;
              scroll-behavior: smooth;
              position: relative;
            }
            
            .chat-messages::-webkit-scrollbar {
              width: 12px;
              background-color: #1a1a1a;
            }
            
            .chat-messages::-webkit-scrollbar-thumb {
              background-color: #ff0000;
              border-radius: 6px;
              border: 3px solid #1a1a1a;
              min-height: 50px;
            }
            
            .chat-messages::-webkit-scrollbar-thumb:hover {
              background-color: #ff3333;
            }
            
            .chat-messages::-webkit-scrollbar-track {
              background-color: #1a1a1a;
              border-radius: 6px;
            }
            
            /* Asegurar que el contenido no se superponga a la scrollbar */
            .chat-messages > * {
              margin-right: 5px;
            }
          `}),e("div",{class:"absolute inset-0 border border-nothing-red/30 rounded-xl blur-sm pointer-events-none"}),e("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-nothing-red/10 via-nothing-red/5 to-nothing-red/10 rounded-xl blur opacity-30 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse-slow"}),e("div",{ref:b,class:"p-4 space-y-4 flex-grow chat-messages",style:"min-height: 430px; max-height: 530px; background: linear-gradient(to bottom, #000000, #0a0a0a 15%, #000000 40%); background-attachment: local; will-change: scroll-position;",children:[S.value&&n.value.length===1&&e("div",{class:"mb-6 bg-gradient-to-br from-nothing-gray/30 to-nothing-gray/10 p-4 rounded-lg border border-nothing-gray/30 backdrop-blur-sm shadow-lg",children:[e("p",{class:"text-nothing-white mb-2 font-medium flex items-center",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 text-nothing-red",children:[e("path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}),e("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e("path",{d:"M12 17h.01"})]}),"Preguntas populares:"]}),e("div",{id:"ia-chat-suggestions",class:"flex flex-wrap gap-2",children:A.map((t,o)=>e("span",{class:"px-3 py-1.5 bg-gradient-to-r from-nothing-gray/40 to-nothing-gray/20 text-nothing-white text-sm rounded-full cursor-pointer border border-nothing-gray/40 hover:border-nothing-red/50 hover:from-nothing-red/20 hover:to-nothing-red/10 transition-all duration-300 shadow-sm",onClick:()=>f(t),children:t},o))})]}),n.value.map((t,o)=>e("div",{class:`flex ${t.role==="user"?"justify-end":"justify-start"} message-item`,children:[t.role==="assistant"&&e("div",{class:"h-8 w-8 rounded-full flex-shrink-0 mr-2 overflow-hidden relative",children:e("img",{src:"/sparkle.png",alt:"SobremIA",class:"w-full h-full object-cover"})}),e("div",{class:`max-w-[80%] rounded-lg px-4 py-3 message-bubble shadow-lg ${t.role==="user"?"bg-gradient-to-br from-nothing-red to-nothing-red/90 text-nothing-white rounded-tr-none":"bg-gradient-to-br from-nothing-gray/90 to-nothing-gray/80 text-nothing-white rounded-tl-none border border-nothing-gray/50"}`,children:t.role==="assistant"?e("div",{class:"prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t.content}}):e("div",{class:"flex items-start justify-between",children:[e("span",{children:t.content}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-2 mt-1 text-nothing-white/70",children:e("path",{d:"M20 6 9 17l-5-5"})})]})}),t.role==="user"&&e("div",{class:"h-8 w-8 rounded-full bg-nothing-red/80 flex items-center justify-center ml-2 border border-nothing-red/30 shadow",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-nothing-white",children:[e("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]})})]},o)),a.value&&e("div",{class:"flex justify-start message-item",children:[e("div",{class:"h-8 w-8 rounded-full flex-shrink-0 mr-2 overflow-hidden relative",children:e("img",{src:"/sparkle.png",alt:"SobremIA",class:"w-full h-full object-cover"})}),e("div",{class:"max-w-[80%] rounded-lg px-5 py-3 bg-gradient-to-r from-nothing-gray/80 to-nothing-gray/70 text-nothing-white flex items-center border border-nothing-gray/40 shadow-lg rounded-tl-none",children:[e("div",{class:"relative mr-3 flex space-x-1",children:[e("span",{class:"h-2 w-2 rounded-full bg-nothing-red/80 animate-bounce",style:"animation-delay: 0ms"}),e("span",{class:"h-2 w-2 rounded-full bg-nothing-red/80 animate-bounce",style:"animation-delay: 150ms"}),e("span",{class:"h-2 w-2 rounded-full bg-nothing-red/80 animate-bounce",style:"animation-delay: 300ms"})]}),e("span",{children:"SobremIA est\xE1 escribiendo..."})]})]})]}),d.value&&e("div",{id:"topic-buttons",class:"px-4 py-2 bg-gradient-to-r from-nothing-black to-nothing-black/95 border-t border-nothing-gray/30",children:e("div",{class:"flex flex-wrap gap-1.5 justify-center",children:L.map((t,o)=>e("button",{type:"button",onClick:()=>{f(`H\xE1blame sobre ${t}`),d.value=!1},class:"px-2 py-1 bg-gradient-to-r from-nothing-red/20 to-nothing-red/10 text-nothing-white text-xs rounded-full cursor-pointer border border-nothing-red/20 hover:border-nothing-red/50 hover:from-nothing-red/30 hover:to-nothing-red/20 transition-all duration-300 shadow-sm transform hover:scale-105",children:t},o))})}),e("form",{onSubmit:j,class:"border-t border-nothing-gray/50 p-5 flex gap-3 chat-input-container bg-gradient-to-b from-nothing-black via-nothing-black to-nothing-black/95 shadow-lg",children:[e("div",{class:"relative flex-grow group",children:[e("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-nothing-red/30 to-nothing-red/20 rounded-lg blur opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition duration-200"}),e("div",{class:"relative",children:[e("input",{type:"text",value:l.value,onInput:t=>l.value=t.target.value,placeholder:"Pregunta a SobremIA...",class:"w-full bg-nothing-gray/90 text-nothing-white p-3.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-nothing-red transition-all duration-300 border border-nothing-gray/50 shadow-inner"}),!l.value&&e("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none flex items-center"})]})]}),e("button",{type:"submit",disabled:a.value,class:`px-5 py-3.5 bg-gradient-to-r from-nothing-red to-nothing-red/90 text-nothing-white rounded-lg font-bold flex items-center justify-center transition-all duration-300 relative overflow-hidden
            ${a.value?"animate-pulse shadow-lg shadow-nothing-red/50":"hover:from-red-600 hover:to-nothing-red shadow-lg hover:shadow-nothing-red/50 shadow-nothing-red/30"}`,children:[e("div",{class:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-0 hover:opacity-20 transition-opacity duration-300"}),e("div",{class:`w-6 h-6 mr-2 relative ${a.value?"animate-pulse":""}`,children:[e("img",{src:"/estrellas.png",alt:"IA",class:`w-full h-full object-contain ${a.value,""}`}),a.value&&e(T,{children:[e("div",{class:"absolute inset-0 bg-nothing-red rounded-full opacity-30 animate-ping"}),e("div",{class:"absolute inset-0 bg-white rounded-full opacity-10 scale-150 animate-pulse blur-md"})]})]}),e("span",{class:"relative z-10",children:"Enviar"})]})]}),e("div",{class:"text-center py-2 text-nothing-lightgray text-xs",children:"SobremIA puede cometer errores. Considera verificar la informaci\xF3n importante."}),e("div",{class:"absolute inset-0 pointer-events-none overflow-hidden",children:[e("div",{class:"particle absolute h-2 w-2 rounded-full bg-nothing-red/10 animate-pulse-slow",style:"top: 10%; left: 15%; animation-delay: 0s;"}),e("div",{class:"particle absolute h-3 w-3 rounded-full bg-nothing-red/10 animate-pulse-slow",style:"top: 60%; left: 85%; animation-delay: 1s;"}),e("div",{class:"particle absolute h-1 w-1 rounded-full bg-nothing-red/10 animate-pulse-slow",style:"top: 80%; left: 20%; animation-delay: 2s;"}),e("div",{class:"particle absolute h-2 w-2 rounded-full bg-nothing-red/10 animate-pulse-slow",style:"top: 30%; left: 90%; animation-delay: 0.5s;"}),e("div",{class:"particle absolute h-1.5 w-1.5 rounded-full bg-nothing-red/10 animate-pulse-slow",style:"top: 70%; left: 60%; animation-delay: 1.5s;"})]})]})]}):e("div",{children:"Cargando chat..."})}export{q as default};
